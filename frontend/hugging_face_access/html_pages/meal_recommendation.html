<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>HealthSync - Diet &amp; Meal Recommendation</title>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script src="js/include-components.js" defer></script>
<script src="js/page-transitions.js" defer></script>
<style type="text/tailwindcss">
        @layer theme {
            :root {
                --saffron: #F4C430;
                --serenity-blue: #B3CDE0;
                --charcoal-gray: #36454F;
                --ivory-white: #FFFFF0;
                --onyx-black: #353839;
            }
        }
        .glassmorphic {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .saffron-gradient {
            background: linear-gradient(135deg, #F4C430, #FFD700);
        }
        .serenity-gradient {
            background: linear-gradient(135deg, #B3CDE0, #C9DAE5);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
<div class="flex flex-col min-h-screen">
<!-- Navbar -->
<nav class="sticky top-0 z-50 w-full bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-sm border-b border-primary/20 dark:border-primary/30 transition-all duration-300 shadow-sm">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Logo and Brand -->
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 text-primary">
                    <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.8261 17.4264C16.7203 18.1174 20.2244 18.5217 24 18.5217C27.7756 18.5217 31.2797 18.1174 34.1739 17.4264C36.9144 16.7722 39.9967 15.2331 41.3563 14.1648L24.8486 40.6391C24.4571 41.267 23.5429 41.267 23.1514 40.6391L6.64374 14.1648C8.00331 15.2331 11.0856 16.7722 13.8261 17.4264Z" fill="currentColor"></path>
                        <path clip-rule="evenodd" d="M39.998 12.236C39.9944 12.2537 39.9875 12.2845 39.9748 12.3294C39.9436 12.4399 39.8949 12.5741 39.8346 12.7175C39.8168 12.7597 39.7989 12.8007 39.7813 12.8398C38.5103 13.7113 35.9788 14.9393 33.7095 15.4811C30.9875 16.131 27.6413 16.5217 24 16.5217C20.3587 16.5217 17.0125 16.131 14.2905 15.4811C12.0012 14.9346 9.44505 13.6897 8.18538 12.8168C8.17384 12.7925 8.16216 12.767 8.15052 12.7408C8.09919 12.6249 8.05721 12.5114 8.02977 12.411C8.00356 12.3152 8.00039 12.2667 8.00004 12.2612C8.00004 12.261 8 12.2607 8.00004 12.2612C8.00004 12.2359 8.0104 11.9233 8.68485 11.3686C9.34546 10.8254 10.4222 10.2469 11.9291 9.72276C14.9242 8.68098 19.1919 8 24 8C28.8081 8 33.0758 8.68098 36.0709 9.72276C37.5778 10.2469 38.6545 10.8254 39.3151 11.3686C39.9006 11.8501 39.9857 12.1489 39.998 12.236ZM4.95178 15.2312L21.4543 41.6973C22.6288 43.5809 25.3712 43.5809 26.5457 41.6973L43.0534 15.223C43.0709 15.1948 43.0878 15.1662 43.104 15.1371L41.3563 14.1648C43.104 15.1371 43.1038 15.1374 43.104 15.1371L43.1051 15.135L43.1065 15.1325L43.1101 15.1261L43.1199 15.1082C43.1276 15.094 43.1377 15.0754 43.1497 15.0527C43.1738 15.0075 43.2062 14.9455 43.244 14.8701C43.319 14.7208 43.4196 14.511 43.5217 14.2683C43.6901 13.8679 44 13.0689 44 12.2609C44 10.5573 43.003 9.22254 41.8558 8.2791C40.6947 7.32427 39.1354 6.55361 37.385 5.94477C33.8654 4.72057 29.133 4 24 4C18.867 4 14.1346 4.72057 10.615 5.94478C8.86463 6.55361 7.30529 7.32428 6.14419 8.27911C4.99695 9.22255 3.99999 10.5573 3.99999 12.2609C3.99999 13.1275 4.29264 13.9078 4.49321 14.3607C4.60375 14.6102 4.71348 14.8196 4.79687 14.9689C4.83898 15.0444 4.87547 15.1065 4.9035 15.1529C4.91754 15.1762 4.92954 15.1957 4.93916 15.2111L4.94662 15.223L4.95178 15.2312ZM35.9868 18.996L24 38.22L12.0131 18.996C12.4661 19.1391 12.9179 19.2658 13.3617 19.3718C16.4281 20.1039 20.0901 20.5217 24 20.5217C27.9099 20.5217 31.5719 20.1039 34.6383 19.3718C35.082 19.2658 35.5339 19.1391 35.9868 18.996Z" fill="currentColor" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <h1 class="text-xl font-bold text-background-dark dark:text-background-light">HealthSync</h1>
            </div>
            
            <!-- Navigation Links - Desktop -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">Home</a>
                <a href="chat.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">Chat</a>
                <a href="health_record.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">Health Records</a>
                <a href="symtom_tracker.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">Symptom Tracker</a>
                <a href="meal_recommendation.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">Meal Plans</a>
                <a href="About&Support.html" class="text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors duration-300">About & Support</a>
            </div>
            
            <!-- User Profile and Mobile Menu Button -->
            <div class="flex items-center gap-4">
                <!-- Theme Toggle Button -->
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="dark:hidden" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" class="hidden dark:block" />
                    </svg>
                </button>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" class="md:hidden p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                
                <!-- User Profile -->
                <div class="w-10 h-10 bg-center bg-no-repeat bg-cover rounded-full border-2 border-primary/50 hover:border-primary transition-all duration-300 transform hover:scale-105" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCJY_SNlNu5YY7cL88XFUoBrgmkrvQqTlH9IJhBUzsbpeMMZq__23KdNHP8ZALrKsgo-qfM8bT8FvW8MjLDyIQeNJ8NWeFJz8zogIesX0_wiHTMew7qBVjWuhiCUXzDHhvGG674wgyHo254WclcNZUvdugLG7gRlTKE5FdHv_3q72Sb4BP_9zz6vY6uNl8s7gIL0GUnYOTKYm3MoW3m2vNroQ2WxqVeP-0RDESlttHiwIGZg0V1GD9fKxLx5W74kISY9f5U4XGlLL28");'></div>
            </div>
        </div>
    </div>
</nav>

<main class="flex-1">
<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
<div class="flex flex-col xl:flex-row gap-8">
<div class="flex-1">
<div class="mb-8 p-6 glassmorphic rounded-2xl">
<h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-200">AI Health Summary</h2>
<div id="symptomSummary" class="text-gray-700 dark:text-gray-300 mb-4">
  Loading your symptom analysis...
</div>
<div class="flex items-center gap-6 mt-4">
<div class="relative w-40 h-40">
<svg class="w-full h-full" viewBox="0 0 36 36">
<path class="text-charcoal-gray" d="M18 2.0845
                                      a 15.9155 15.9155 0 0 1 0 31.831
                                      a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-width="3"></path>
<path class="text-primary" d="M18 2.0845
                                      a 15.9155 15.9155 0 0 1 0 31.831
                                      a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-dasharray="75, 100" stroke-linecap="round" stroke-width="3"></path>
<path class="text-blue-400" d="M18 2.0845
                                      a 15.9155 15.9155 0 0 1 0 31.831
                                      a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-dasharray="50, 100" stroke-dashoffset="-25" stroke-linecap="round" stroke-width="3"></path>
</svg>
<div class="absolute inset-0 flex flex-col items-center justify-center">
<span class="health-score text-3xl font-bold" id="health-score">75%</span>
<span class="text-sm text-blue-400">Health Score</span>
</div>
</div>
<div class="flex-1">
<h2 class="text-2xl font-bold">AI Health Summary</h2>
<p class="health-summary text-blue-400 mt-2" id="health-summary">Your health score has decreased slightly due to recent symptoms. Your updated meal plan focuses on reducing inflammation and boosting immune function. We've adjusted based on your recent symptom logs.</p>
</div>
</div>
<div class="mb-8">
<h3 class="text-2xl font-bold mb-4">Indian Meal Recommendations</h3>
<p class="text-gray-700 dark:text-gray-300 mb-4">These affordable Indian dishes are specifically selected to help with your symptoms and promote healing.</p>
<div id="indianMealCards" class="flex gap-6 pb-4 overflow-x-auto">
  <!-- Indian meal cards will be dynamically inserted here -->
</div>
</div>

<div class="mb-8">
<h3 class="text-2xl font-bold mb-4">Weekly Indian Meal Plan</h3>
<div class="overflow-x-auto">
  <table class="w-full border-collapse" id="weeklyMealTable">
    <thead>
      <tr>
        <th class="border p-2 bg-gray-100 dark:bg-gray-700">Day</th>
        <th class="border p-2 bg-gray-100 dark:bg-gray-700">Breakfast</th>
        <th class="border p-2 bg-gray-100 dark:bg-gray-700">Lunch</th>
        <th class="border p-2 bg-gray-100 dark:bg-gray-700">Dinner</th>
      </tr>
    </thead>
    <tbody id="weeklyMealPlanBody">
      <!-- Weekly meal plan will be dynamically inserted here -->
    </tbody>
  </table>
</div>
</div>

<div class="glassmorphic rounded-2xl p-6 mb-8">
<h3 class="text-2xl font-bold mb-4">Ayurvedic Nutrition Tips</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <div class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
    <h4 class="text-lg font-semibold mb-2">Spice Benefits</h4>
    <p>Include turmeric, ginger, and cumin in your meals for their anti-inflammatory and digestive benefits.</p>
  </div>
  <div class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
    <h4 class="text-lg font-semibold mb-2">Mindful Eating</h4>
    <p>Practice mindful eating by sitting down, chewing thoroughly, and avoiding distractions during meals.</p>
  </div>
  <div class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
    <h4 class="text-lg font-semibold mb-2">Balanced Diet</h4>
    <p>Follow Ayurvedic principles by including all six tastes (sweet, sour, salty, pungent, bitter, astringent) in your meals.</p>
  </div>
</div>
</div>
</div>
</div>
</div>
</div>
<div>
<script>
// Sample Indian meals data
const indianMeals = [
  {
    name: "Khichdi",
    description: "A light and nutritious dish made with rice and lentils, easy to digest and perfect for recovery.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/05/moong-dal-khichdi-2.jpg",
    videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
    benefits: ["Easy to digest", "Protein-rich", "Anti-inflammatory"],
    ingredients: ["Rice", "Moong dal", "Turmeric", "Cumin", "Ghee"],
    conditions: ["fever", "stomach", "digestion", "weakness"]
  },
  {
    name: "Turmeric Milk (Haldi Doodh)",
    description: "A traditional remedy for colds, coughs, and inflammation, made with milk and turmeric.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2020/09/turmeric-milk-recipe-1.jpg",
    videoLink: "https://www.youtube.com/watch?v=j7tSMBUQTHM",
    benefits: ["Anti-inflammatory", "Immunity booster", "Sleep aid"],
    ingredients: ["Milk", "Turmeric", "Black pepper", "Honey"],
    conditions: ["cold", "cough", "inflammation", "joint pain", "sleep"]
  },
  {
    name: "Rasam",
    description: "A South Indian soup known for its tangy flavor and medicinal properties, great for colds and digestion.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/06/rasam-recipe-1.jpg",
    videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
    benefits: ["Digestive aid", "Anti-inflammatory", "Rich in antioxidants"],
    ingredients: ["Tamarind", "Tomatoes", "Pepper", "Cumin", "Garlic"],
    conditions: ["cold", "digestion", "respiratory"]
  },
  {
    name: "Kadhi",
    description: "A yogurt-based curry that aids digestion and provides probiotics for gut health.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/05/punjabi-kadhi-recipe-1.jpg",
    videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
    benefits: ["Probiotic-rich", "Digestive aid", "Cooling properties"],
    ingredients: ["Yogurt", "Gram flour", "Turmeric", "Cumin", "Fenugreek seeds"],
    conditions: ["digestion", "stomach"]
  },
  {
    name: "Vegetable Daliya",
    description: "A wholesome porridge made with broken wheat and vegetables, high in fiber and nutrients.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2013/05/vegetable-daliya-recipe.jpg",
    videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
    benefits: ["High fiber", "Nutrient-dense", "Low glycemic index"],
    ingredients: ["Broken wheat", "Mixed vegetables", "Cumin", "Turmeric", "Ghee"],
    conditions: ["digestion", "fatigue"]
  },
  {
    name: "Curd Rice",
    description: "A cooling dish made with rice and yogurt, perfect for soothing the digestive system.",
    image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/07/curd-rice-recipe-1.jpg",
    videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
    benefits: ["Probiotic-rich", "Cooling effect", "Easy to digest"],
    ingredients: ["Rice", "Yogurt", "Cucumber", "Pomegranate", "Curry leaves"],
    conditions: ["stomach", "digestion", "stress"]
  }
];

// Sample weekly meal plan data
const weeklyMealPlan = [
  {
    day: "Monday",
    breakfast: "Vegetable Upma with Coconut Chutney",
    lunch: "Moong Dal Khichdi with Yogurt",
    dinner: "Vegetable Soup with Multigrain Roti"
  },
  {
    day: "Tuesday",
    breakfast: "Ragi Porridge with Nuts and Honey",
    lunch: "Curd Rice with Cucumber Raita",
    dinner: "Vegetable Daliya with Mint Chutney"
  },
  {
    day: "Wednesday",
    breakfast: "Besan Chilla with Mint Chutney",
    lunch: "Rasam with Steamed Rice and Vegetables",
    dinner: "Millet Khichdi with Kadhi"
  },
  {
    day: "Thursday",
    breakfast: "Oats Idli with Coconut Chutney",
    lunch: "Vegetable Pulao with Buttermilk",
    dinner: "Moong Dal Soup with Multigrain Roti"
  },
  {
    day: "Friday",
    breakfast: "Vegetable Poha with Lemon",
    lunch: "Rajma Chawal with Cucumber Salad",
    dinner: "Vegetable Khichdi with Turmeric Milk"
  },
  {
    day: "Saturday",
    breakfast: "Vegetable Daliya Upma",
    lunch: "Kadhi with Steamed Rice",
    dinner: "Vegetable Soup with Millet Roti"
  },
  {
    day: "Sunday",
    breakfast: "Multigrain Dosa with Sambar",
    lunch: "Vegetable Biryani with Raita",
    dinner: "Light Khichdi with Turmeric Milk"
  }
];

document.addEventListener('DOMContentLoaded', function() {
  // Load symptom analysis from local storage
  loadSymptomAnalysis();
  
  // Render meal recommendations
  renderMealRecommendations();
  
  // Render weekly meal plan
  renderWeeklyMealPlan();
  
  // Listen for symptom updates
  window.addEventListener('healthsync_record_updated', function() {
    loadSymptomAnalysis();
  });
});

// Extract meal suggestions from symptom analysis
function extractMealSuggestions(symptomText) {
  // Keywords to look for in symptom analysis
  const conditionKeywords = {
    'fever': ['khichdi', 'turmeric milk', 'rasam'],
    'cold': ['turmeric milk', 'rasam', 'ginger tea'],
    'cough': ['turmeric milk', 'ginger tea', 'honey'],
    'headache': ['ginger tea', 'mint tea', 'curd rice'],
    'stomach': ['khichdi', 'curd rice', 'kadhi'],
    'digestion': ['khichdi', 'curd rice', 'kadhi', 'rasam'],
    'inflammation': ['turmeric milk', 'khichdi'],
    'joint pain': ['turmeric milk'],
    'fatigue': ['vegetable daliya', 'khichdi'],
    'weakness': ['khichdi', 'vegetable daliya'],
    'stress': ['curd rice', 'turmeric milk'],
    'respiratory': ['rasam', 'turmeric milk']
  };
  
  // Default suggestions if no matches found
  let suggestedMeals = ['khichdi', 'turmeric milk', 'curd rice', 'rasam', 'vegetable daliya', 'kadhi'];
  
  // Check for condition keywords in symptom text
  if (symptomText) {
    const lowerText = symptomText.toLowerCase();
    let matchedSuggestions = [];
    
    for (const [condition, meals] of Object.entries(conditionKeywords)) {
      if (lowerText.includes(condition)) {
        matchedSuggestions = [...matchedSuggestions, ...meals];
      }
    }
    
    // If we found specific matches, use them
    if (matchedSuggestions.length > 0) {
      // Remove duplicates
      suggestedMeals = [...new Set(matchedSuggestions)];
    }
  }
  
  return suggestedMeals;
}

// Load symptom analysis from local storage
function loadSymptomAnalysis() {
  const latestSymptom = localStorage.getItem('healthsync_latest_symptom');
  const summaryElement = document.getElementById('symptomSummary');
  
  if (latestSymptom && summaryElement) {
    try {
      const symptomData = JSON.parse(latestSymptom);
      
      if (symptomData.analysis) {
        summaryElement.innerHTML = symptomData.analysis;
        
        // Extract meal suggestions based on symptom analysis
        const suggestedMeals = extractMealSuggestions(symptomData.analysis);
        
        // Filter and render meal recommendations
        renderFilteredMealRecommendations(suggestedMeals);
      } else {
        // Use sample data if no analysis is available
        summaryElement.innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
        
        // Render default meal recommendations
        renderMealRecommendations();
      }
    } catch (e) {
      console.error("Error parsing symptom data:", e);
      // Use sample data as fallback
      if (summaryElement) {
        summaryElement.innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
      }
      
      // Render default meal recommendations
      renderMealRecommendations();
    }
  } else {
    // Use sample data if no symptom data is available
    if (summaryElement) {
      summaryElement.innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
    }
    
    // Render default meal recommendations
    renderMealRecommendations();
  }
}

// Render filtered meal recommendations based on suggested meals
function renderFilteredMealRecommendations(suggestedMeals) {
  const mealContainer = document.getElementById('indianMealCards');
  if (!mealContainer) return;
  
  // Clear existing meal cards
  mealContainer.innerHTML = '';
  
  // Filter meals based on suggestions
  const filteredMeals = indianMeals.filter(meal => {
    const mealNameLower = meal.name.toLowerCase();
    return suggestedMeals.some(suggestion => 
      mealNameLower.includes(suggestion.toLowerCase())
    );
  });
  
  // If no matches, use all meals
  const mealsToRender = filteredMeals.length > 0 ? filteredMeals : indianMeals;
  
  // Render meal cards
  mealsToRender.forEach(meal => {
    const benefitTags = meal.benefits.map(benefit => 
      `<span class="inline-block bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 text-xs px-2 py-1 rounded-full mr-1 mb-1">${benefit}</span>`
    ).join('');
    
    const mealCard = document.createElement('div');
    mealCard.className = 'w-[300px] flex-shrink-0';
    mealCard.innerHTML = `
      <div class="group relative rounded-2xl glassmorphic overflow-hidden transform hover:scale-105 transition-transform duration-300 ease-in-out">
        <div class="w-full h-48 bg-cover bg-center" style="background-image: url('${meal.image}')"></div>
        <div class="p-4">
          <h4 class="text-lg font-bold mt-1">${meal.name}</h4>
          <p class="text-sm text-gray-600 dark:text-gray-300 h-12 overflow-hidden">${meal.description}</p>
          <div class="my-2 flex flex-wrap">
            ${benefitTags}
          </div>
          <p class="text-sm"><strong>Key Ingredients:</strong> ${meal.ingredients.join(', ')}</p>
          <div class="flex justify-end mt-4">
            <a href="${meal.videoLink}" target="_blank" class="flex items-center gap-1 text-sm font-medium text-orange-500 hover:underline">
              <span>Watch Recipe Video</span>
              <span class="material-symbols-outlined text-base">arrow_forward</span>
            </a>
          </div>
        </div>
      </div>
    `;
    
    mealContainer.appendChild(mealCard);
  });
}

// Render default meal recommendations
function renderMealRecommendations() {
  const mealContainer = document.getElementById('indianMealCards');
  if (!mealContainer) return;
  
  // Clear existing meal cards
  mealContainer.innerHTML = '';
  
  indianMeals.forEach(meal => {
    const benefitTags = meal.benefits.map(benefit => 
      `<span class="inline-block bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 text-xs px-2 py-1 rounded-full mr-1 mb-1">${benefit}</span>`
    ).join('');
    
    const mealCard = document.createElement('div');
    mealCard.className = 'w-[300px] flex-shrink-0';
    mealCard.innerHTML = `
      <div class="group relative rounded-2xl glassmorphic overflow-hidden transform hover:scale-105 transition-transform duration-300 ease-in-out">
        <div class="w-full h-48 bg-cover bg-center" style="background-image: url('${meal.image}')"></div>
        <div class="p-4">
          <h4 class="text-lg font-bold mt-1">${meal.name}</h4>
          <p class="text-sm text-gray-600 dark:text-gray-300 h-12 overflow-hidden">${meal.description}</p>
          <div class="my-2 flex flex-wrap">
            ${benefitTags}
          </div>
          <p class="text-sm"><strong>Key Ingredients:</strong> ${meal.ingredients.join(', ')}</p>
          <div class="flex justify-end mt-4">
            <a href="${meal.videoLink}" target="_blank" class="flex items-center gap-1 text-sm font-medium text-orange-500 hover:underline">
              <span>Watch Recipe Video</span>
              <span class="material-symbols-outlined text-base">arrow_forward</span>
            </a>
          </div>
        </div>
      </div>
    `;
    
    mealContainer.appendChild(mealCard);
  });
}

// Render weekly meal plan
function renderWeeklyMealPlan() {
  const tableBody = document.getElementById('weeklyMealPlanBody');
  if (!tableBody) return;
  
  // Clear existing rows
  tableBody.innerHTML = '';
  
  weeklyMealPlan.forEach(day => {
    const row = document.createElement('tr');
    
    row.innerHTML = `
      <td class="border p-2">${day.day}</td>
      <td class="border p-2">${day.breakfast}</td>
      <td class="border p-2">${day.lunch}</td>
      <td class="border p-2">${day.dinner}</td>
    `;
    
    tableBody.appendChild(row);
  });
}
</script>

<div class="glassmorphic rounded-2xl p-6">
<details>
<summary class="flex justify-between items-center cursor-pointer">
<h3 class="text-2xl font-bold">Weekly Planner</h3>
<span class="material-symbols-outlined text-saffron transition-transform transform">expand_more</span>
</summary>
<div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Monday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: Energy Boost</p>
</div>
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Tuesday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: Anti-inflammatory</p>
</div>
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Wednesday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: Gut Health</p>
</div>
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Thursday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: High Protein</p>
</div>
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Friday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: Antioxidants</p>
</div>
<div class="p-4 rounded-lg bg-onyx-black/50">
<h4 class="font-bold">Saturday</h4>
<p class="text-sm text-serenity-blue mt-1">Focus: Hydration</p>
</div>
</div>
</details>
</div>
</div>
</div>
<aside class="w-full xl:w-[380px] xl:sticky top-28 self-start">
<div class="p-6 glassmorphic rounded-2xl">
<div id="meal-recommendation-container" class="bg-cover bg-center rounded-lg min-h-[250px] p-6 relative overflow-hidden" style='background-image: linear-gradient(0deg, rgba(53, 56, 57, 0.8) 0%, rgba(53, 56, 57, 0.2) 60%), url("https://lh3.googleusercontent.com/aida-public/AB6AXuBGGayXEPDRZfDnTrXWQ5gM6-oJlsov66nF4VIkiUWdqnsJja9Ty9t3eaF3bePp1Oox9A3PzFR4XtViR5c8EGfLFOOLYZEgyft0HPED6iOcN5Rg6FesQi8RUEmqhWdc1ivF4Mig3GvkzSo5cAdpPyTMpW4-9Bfow7fzkfgNrFJkhBtgaj5zoLntlaXwcfjVmDLZ4TUWL_NDaKluVvBqA3DLEN7PJM3eFi10BGRk-KN7O-cwoO-bmBcKFWxp3zIICaMp2CJEsGpgW8dS");'>
<div class="relative z-10 text-ivory-white">
<h4 id="meal-title" class="text-lg font-bold">Grilled Lemon Herb Salmon</h4>
<p id="meal-description" class="text-sm mt-1 mb-4 text-serenity-blue">A light yet satisfying dish packed with omega-3s to help reduce inflammation.</p>
<div class="saffron-gradient rounded-lg text-onyx-black p-4">
<p class="font-bold">AI Recommendation Context:</p>
<p id="ai-recommendation" class="text-sm mt-1">"Based on your fatigue logs from this week, incorporating more Omega-3 fatty acids could help. This salmon dish is an excellent source."</p>
</div>
<button id="swap-meal-btn" class="mt-4 flex w-full items-center justify-center rounded-lg h-12 px-6 bg-saffron text-onyx-black text-base font-bold shadow-sm hover:opacity-90 transition-opacity">
<span>Swap for Dinner</span>
</button>
</div>
</div>
<div class="mt-4 p-4 rounded-lg serenity-gradient text-onyx-black">
<h4 class="font-bold">Pro Tip</h4>
<p id="pro-tip" class="text-sm mt-1">Pair with steamed asparagus. The fiber aids digestion, which can be affected by your current treatment plan.</p>
</div>
</div>
</aside>
</div>
</div>
</main>

<!-- Add data component for navbar -->
<div data-component="navbar.html"></div>

<!-- Remove the bottom navigation as we're using the navbar component -->
<!-- <nav class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50">
<div class="flex items-center gap-2 glassmorphic rounded-full p-2 shadow-lg">
<button class="flex flex-col items-center justify-center rounded-full w-16 h-16 text-ivory-white hover:bg-ivory-white/10 transition-colors">
<span class="material-symbols-outlined">home</span>
<span class="text-xs">Home</span>
</button>
<button class="flex flex-col items-center justify-center rounded-full w-16 h-16 text-saffron bg-ivory-white/10 transition-colors">
<span class="material-symbols-outlined">restaurant_menu</span>
<span class="text-xs">Diet</span>
</button>
<button class="saffron-gradient w-20 h-20 rounded-full flex items-center justify-center text-onyx-black shadow-lg transform hover:scale-110 transition-transform">
<span class="material-symbols-outlined text-4xl">mic</span>
</button>
<button class="flex flex-col items-center justify-center rounded-full w-16 h-16 text-ivory-white hover:bg-ivory-white/10 transition-colors">
<span class="material-symbols-outlined">chat</span>
<span class="text-xs">Chat</span>
</button>
<button class="flex flex-col items-center justify-center rounded-full w-16 h-16 text-ivory-white hover:bg-ivory-white/10 transition-colors">
<span class="material-symbols-outlined">person</span>
<span class="text-xs">Profile</span>
</button>
</div>
</nav> -->
</div>

<script src="../js/include-components.js"></script>
<script src="../js/page-transitions.js"></script>

<script>
  // Function to fetch user health data
  async function fetchUserHealthData() {
    try {
      // Mock data for demonstration
      return {
        healthScore: 75,
        recentSymptoms: ['fatigue', 'joint pain'],
        dietaryRestrictions: ['gluten-free'],
        allergies: ['peanuts']
      };
    } catch (error) {
      console.error('Error fetching health data:', error);
      return null;
    }
  }
  
  // Function to fetch symptom data
  async function fetchSymptomData() {
    try {
      // Mock data for demonstration
      return {
        symptoms: [
          { name: 'Fatigue', severity: 'moderate' },
          { name: 'Nausea', severity: 'mild' },
          { name: 'Joint Pain', severity: 'severe' }
        ]
      };
    } catch (error) {
      console.error('Error fetching symptom data:', error);
      return null;
    }
  }
  
  // Meal recommendations based on symptoms
  const mealRecommendations = {
    'Fatigue': {
      title: 'Iron-Rich Spinach and Beef Bowl',
      description: 'A nutrient-dense meal with lean beef and spinach to combat fatigue and boost energy levels.',
      image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuDGGxXXvLOVwF-Yx_Iy-DfXXwTKxwF_dhYbDFXMJVBgIyDYOUULF-CJYpGwvxvqvdkTQzlcQs_PjGnPXtXQnrM5Yw9Hs-Yk-Gg9Ow0=s0',
      recommendation: 'Your recent fatigue symptoms suggest you may benefit from iron-rich foods. This meal provides essential nutrients to help boost your energy levels.',
      proTip: 'Include a vitamin C source like lemon or bell peppers to enhance iron absorption from plant sources.'
    },
    'Nausea': {
      title: 'Ginger Lemon Chicken Soup',
      description: 'A gentle, soothing soup with anti-nausea properties from fresh ginger and protein from chicken.',
      image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBxhw9vQ-YYfPDyXnfJSCZzxxBxeH_8tEZ5vJ_fgOQQsKX7h-kRfLOYLNMrxTPxcKTl-Ql-Uh9Hl_Hs1Ys-Iy-Yw9Hs-Yk-Gg9Ow0=s0',
      recommendation: 'Based on your nausea symptoms, this ginger-infused soup can help calm your stomach while providing necessary nutrition.',
      proTip: 'Sip slowly and eat small portions throughout the day rather than large meals to manage nausea.'
    },
    'Joint Pain': {
      title: 'Turmeric Salmon with Cherries',
      description: 'Anti-inflammatory meal combining omega-3 rich salmon with turmeric and tart cherries to help reduce joint pain.',
      image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBGGayXEPDRZfDnTrXWQ5gM6-oJlsov66nF4VIkiUWdqnsJja9Ty9t3eaF3bePp1Oox9A3PzFR4XtViR5c8EGfLFOOLYZEgyft0HPED6iOcN5Rg6FesQi8RUEmqhWdc1ivF4Mig3GvkzSo5cAdpPyTMpW4-9Bfow7fzkfgNrFJkhBtgaj5zoLntlaXwcfjVmDLZ4TUWL_NDaKluVvBqA3DLEN7PJM3eFi10BGRk-KN7O-cwoO-bmBcKFWxp3zIICaMp2CJEsGpgW8dS',
      recommendation: 'Your joint pain symptoms indicate you may benefit from anti-inflammatory foods. This salmon dish contains omega-3 fatty acids and turmeric to help reduce inflammation.',
      proTip: 'Pair with a side of tart cherries, which contain compounds that may help reduce joint pain and inflammation.'
    },
    'default': {
      title: 'Grilled Lemon Herb Salmon',
      description: 'A light yet satisfying dish packed with omega-3s to help reduce inflammation.',
      image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBGGayXEPDRZfDnTrXWQ5gM6-oJlsov66nF4VIkiUWdqnsJja9Ty9t3eaF3bePp1Oox9A3PzFR4XtViR5c8EGfLFOOLYZEgyft0HPED6iOcN5Rg6FesQi8RUEmqhWdc1ivF4Mig3GvkzSo5cAdpPyTMpW4-9Bfow7fzkfgNrFJkhBtgaj5zoLntlaXwcfjVmDLZ4TUWL_NDaKluVvBqA3DLEN7PJM3eFi10BGRk-KN7O-cwoO-bmBcKFWxp3zIICaMp2CJEsGpgW8dS',
      recommendation: 'Based on your fatigue logs from this week, incorporating more Omega-3 fatty acids could help. This salmon dish is an excellent source.',
      proTip: 'Pair with steamed asparagus. The fiber aids digestion, which can be affected by your current treatment plan.'
    }
  };
  
  // Function to update meal recommendations based on symptoms
  async function updateMealRecommendations() {
    try {
      const symptomData = await fetchSymptomData();
      
      if (!symptomData || !symptomData.symptoms || symptomData.symptoms.length === 0) {
        updateUIWithMealRecommendation('default');
        return;
      }
      
      // Find the most severe symptom
      let mostSevereSymptom = symptomData.symptoms[0];
      
      for (const symptom of symptomData.symptoms) {
        if (symptom.severity === 'severe') {
          mostSevereSymptom = symptom;
          break;
        } else if (symptom.severity === 'moderate' && mostSevereSymptom.severity !== 'severe') {
          mostSevereSymptom = symptom;
        }
      }
      
      // Update UI based on the most severe symptom
      updateUIWithMealRecommendation(mostSevereSymptom.name);
      
      // Update health summary and score
      updateHealthSummary(symptomData.symptoms);
      
    } catch (error) {
      console.error('Error updating meal recommendations:', error);
      updateUIWithMealRecommendation('default');
    }
  }
  
  // Function to update UI with meal recommendation
  function updateUIWithMealRecommendation(symptomName) {
    const recommendation = mealRecommendations[symptomName] || mealRecommendations['default'];
    
    // Update meal title and description
    document.getElementById('meal-title').textContent = recommendation.title;
    document.getElementById('meal-description').textContent = recommendation.description;
    
    // Update AI recommendation
    document.getElementById('ai-recommendation').textContent = recommendation.recommendation;
    
    // Update pro tip
    document.getElementById('pro-tip').textContent = recommendation.proTip;
    
    // Update meal image if available
    if (recommendation.image) {
      document.getElementById('meal-recommendation-container').style.backgroundImage = `linear-gradient(0deg, rgba(53, 56, 57, 0.8) 0%, rgba(53, 56, 57, 0.2) 60%), url("${recommendation.image}")`;
    }
  }
  
  // Function to update health summary and score
  function updateHealthSummary(symptoms) {
    // Calculate health score based on symptoms
    let healthScore = 100;
    let summaryText = '';
    
    for (const symptom of symptoms) {
      if (symptom.severity === 'severe') {
        healthScore -= 15;
        summaryText += `Your ${symptom.name.toLowerCase()} is concerning. `;
      } else if (symptom.severity === 'moderate') {
        healthScore -= 10;
        summaryText += `Your ${symptom.name.toLowerCase()} needs attention. `;
      } else if (symptom.severity === 'mild') {
        healthScore -= 5;
        summaryText += `Your ${symptom.name.toLowerCase()} is mild. `;
      }
    }
    
    // Ensure health score is between 0 and 100
    healthScore = Math.max(0, Math.min(100, healthScore));
    
    // Update health score in UI if elements exist
    const healthScoreElement = document.querySelector('.health-score');
    if (healthScoreElement) {
      healthScoreElement.textContent = healthScore;
    }
    
    // Update health summary in UI if element exists
    const healthSummaryElement = document.querySelector('.health-summary');
    if (healthSummaryElement) {
      healthSummaryElement.textContent = summaryText || 'Your health is looking good today!';
    }
  }
  
  // Add event listener for swap meal button
  document.getElementById('swap-meal-btn').addEventListener('click', function() {
    // Get all symptom names
    const symptomNames = Object.keys(mealRecommendations).filter(name => name !== 'default');
    
    // Get a random symptom name
    const randomSymptom = symptomNames[Math.floor(Math.random() * symptomNames.length)];
    
    // Update UI with the random meal recommendation
    updateUIWithMealRecommendation(randomSymptom);
  });
  
  // Initialize meal recommendations when page loads
  document.addEventListener('DOMContentLoaded', function() {
    updateMealRecommendations();
  });

  // Function to fetch personalized meal recommendations
  async function fetchMealRecommendations() {
    try {
      const response = await fetch('http://localhost:4000/meal-recommendations', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          healthCondition: 'fatigue', // This could be dynamically set based on user's health data
          preferences: ['Indian', 'vegetarian'],
          mealType: 'all' // breakfast, lunch, dinner, or all
        })
      });
      
      if (!response.ok) {
        throw new Error('Failed to fetch meal recommendations');
      }
      
      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Error fetching meal recommendations:', error);
      return null;
    }
  }

  // Function to update the UI with meal recommendations
  function updateMealUI(meals) {
    if (!meals || !meals.recommendations) return;
    
    const mealContainer = document.querySelector('.flex.gap-6.pb-4.overflow-x-auto');
    if (!mealContainer) return;
    
    // Clear existing meals
    mealContainer.innerHTML = '';
    
    // Add new meals
    meals.recommendations.forEach(meal => {
      const mealCard = document.createElement('div');
      mealCard.className = 'w-[300px] flex-shrink-0';
      mealCard.innerHTML = `
        <div class="group relative rounded-2xl glassmorphic overflow-hidden transform hover:scale-105 transition-transform duration-300 ease-in-out">
          <div class="w-full h-48 bg-cover bg-center" style="background-image: url('${meal.imageUrl || 'https://via.placeholder.com/300x200'}')"></div>
          <div class="p-4">
            <p class="text-xs text-saffron font-bold">${meal.mealType.toUpperCase()}</p>
            <h4 class="text-lg font-bold mt-1">${meal.name}</h4>
            <p class="text-sm text-serenity-blue h-12 overflow-hidden">${meal.description}</p>
            <div class="flex justify-between items-center mt-4">
              <div class="flex gap-4">
                <div><span class="font-bold">P:</span> ${meal.protein}g</div>
                <div><span class="font-bold">C:</span> ${meal.carbs}g</div>
                <div><span class="font-bold">F:</span> ${meal.fat}g</div>
              </div>
              <button class="flex items-center gap-1 text-sm font-medium text-saffron hover:underline">
                <span>Details</span>
                <span class="material-symbols-outlined text-base">arrow_forward</span>
              </button>
            </div>
          </div>
        </div>
      `;
      mealContainer.appendChild(mealCard);
    });
  }

  // Function to update health summary
  function updateHealthSummary(healthData) {
    if (!healthData) return;
    
    const healthScoreElement = document.querySelector('.absolute.inset-0 .text-3xl.font-bold');
    const healthSummaryElement = document.querySelector('.flex-1 .text-serenity-blue.mt-2');
    
    if (healthScoreElement) {
      healthScoreElement.textContent = `${healthData.healthScore}%`;
    }
    
    if (healthSummaryElement) {
      healthSummaryElement.textContent = healthData.summary;
    }
    
    // Update the circular progress indicators
    const saffronPath = document.querySelector('.text-saffron');
    const serenityPath = document.querySelector('.text-serenity-blue[stroke-dasharray]');
    
    if (saffronPath) {
      saffronPath.setAttribute('stroke-dasharray', `${healthData.healthScore}, 100`);
    }
    
    if (serenityPath) {
      serenityPath.setAttribute('stroke-dasharray', `${healthData.energyLevel}, 100`);
      serenityPath.setAttribute('stroke-dashoffset', `-${100 - healthData.healthScore}`);
    }
  }

  // Initialize the page
  async function initPage() {
    // Fetch health data and meal recommendations
    const healthData = await fetchUserHealthData();
    const mealRecommendations = await fetchMealRecommendations();
    
    // Update UI
    if (healthData) {
      updateHealthSummary(healthData);
    }
    
    if (mealRecommendations) {
      updateMealUI(mealRecommendations);
    }
  }

  // Run initialization when DOM is loaded
  document.addEventListener('DOMContentLoaded', initPage);
</script>

</body></html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthSync - Meal Recommendations</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/script.js" defer></script>
    <style>
        /* Additional styles for Indian meal recommendations */
        .meal-card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        .meal-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .meal-card-content {
            padding: 15px;
        }
        
        .meal-benefits {
            display: flex;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        
        .meal-benefit-tag {
            background-color: #f8f0e3;
            color: #d35400;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .video-link {
            display: inline-block;
            background-color: #e67e22;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }
        
        .video-link:hover {
            background-color: #d35400;
        }
        
        .ai-summary {
            background-color: #f5f5f5;
            border-left: 4px solid #e67e22;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 0 5px 5px 0;
        }
        
        .weekly-plan table {
            border-collapse: collapse;
            width: 100%;
        }
        
        .weekly-plan th, .weekly-plan td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .weekly-plan th {
            background-color: #f8f0e3;
        }
        
        .weekly-plan tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>

<main>
    <!-- AI Health Summary Section -->
    <section class="ai-summary">
        <h2>AI Health Summary</h2>
        <div id="symptomSummary">
            Loading your symptom analysis...
        </div>
        <div id="dietaryRecommendations" style="margin-top: 15px;">
            <h3>Dietary Recommendations</h3>
            <p>Based on your symptoms, we recommend focusing on anti-inflammatory foods and avoiding potential trigger foods. The Indian meal suggestions below are tailored to help alleviate your symptoms.</p>
        </div>
    </section>
    
    <section class="meal-recommendations">
        <h2>Recommended Indian Meals</h2>
        <p>These affordable Indian dishes are specifically selected to help with your symptoms and promote healing.</p>
        
        <div class="meal-cards" id="indianMealCards">
            <!-- Indian meal cards will be dynamically inserted here -->
        </div>
    </section>
    
    <section class="weekly-plan">
        <h2>Your Weekly Meal Plan</h2>
        <p>Follow this customized weekly plan featuring Indian dishes to help manage your symptoms.</p>
        
        <table class="meal-table" id="weeklyMealTable">
            <thead>
                <tr>
                    <th>Day</th>
                    <th>Breakfast</th>
                    <th>Lunch</th>
                    <th>Dinner</th>
                </tr>
            </thead>
            <tbody id="weeklyMealPlanBody">
                <!-- Weekly meal plan will be dynamically inserted here -->
            </tbody>
        </table>
    </section>
    
    <section class="nutrition-tips">
        <h2>Ayurvedic Nutrition Tips</h2>
        <div class="tips-container">
            <div class="tip">
                <h3>Spice Benefits</h3>
                <p>Include turmeric, ginger, and cumin in your meals for their anti-inflammatory and digestive benefits.</p>
            </div>
            <div class="tip">
                <h3>Mindful Eating</h3>
                <p>Practice mindful eating by sitting down, chewing thoroughly, and avoiding distractions during meals.</p>
            </div>
            <div class="tip">
                <h3>Balanced Diet</h3>
                <p>Follow Ayurvedic principles by including all six tastes (sweet, sour, salty, pungent, bitter, astringent) in your meals.</p>
            </div>
        </div>
    </section>
</main>

<script>
    // Sample Indian meals data - this would be dynamically generated based on symptoms
    const indianMeals = [
        {
            name: "Khichdi",
            description: "A light and nutritious dish made with rice and lentils, easy to digest and perfect for recovery.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/05/moong-dal-khichdi-2.jpg",
            videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
            benefits: ["Easy to digest", "Protein-rich", "Anti-inflammatory"],
            ingredients: ["Rice", "Moong dal", "Turmeric", "Cumin", "Ghee"]
        },
        {
            name: "Turmeric Milk (Haldi Doodh)",
            description: "A traditional remedy for colds, coughs, and inflammation, made with milk and turmeric.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2020/09/turmeric-milk-recipe-1.jpg",
            videoLink: "https://www.youtube.com/watch?v=j7tSMBUQTHM",
            benefits: ["Anti-inflammatory", "Immunity booster", "Sleep aid"],
            ingredients: ["Milk", "Turmeric", "Black pepper", "Honey"]
        },
        {
            name: "Rasam",
            description: "A South Indian soup known for its tangy flavor and medicinal properties, great for colds and digestion.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/06/rasam-recipe-1.jpg",
            videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
            benefits: ["Digestive aid", "Anti-inflammatory", "Rich in antioxidants"],
            ingredients: ["Tamarind", "Tomatoes", "Pepper", "Cumin", "Garlic"]
        },
        {
            name: "Kadhi",
            description: "A yogurt-based curry that aids digestion and provides probiotics for gut health.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/05/punjabi-kadhi-recipe-1.jpg",
            videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
            benefits: ["Probiotic-rich", "Digestive aid", "Cooling properties"],
            ingredients: ["Yogurt", "Gram flour", "Turmeric", "Cumin", "Fenugreek seeds"]
        },
        {
            name: "Vegetable Daliya",
            description: "A wholesome porridge made with broken wheat and vegetables, high in fiber and nutrients.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2013/05/vegetable-daliya-recipe.jpg",
            videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
            benefits: ["High fiber", "Nutrient-dense", "Low glycemic index"],
            ingredients: ["Broken wheat", "Mixed vegetables", "Cumin", "Turmeric", "Ghee"]
        },
        {
            name: "Curd Rice",
            description: "A cooling dish made with rice and yogurt, perfect for soothing the digestive system.",
            image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/07/curd-rice-recipe-1.jpg",
            videoLink: "https://www.youtube.com/watch?v=6IM4Ag3KHxs",
            benefits: ["Probiotic-rich", "Cooling effect", "Easy to digest"],
            ingredients: ["Rice", "Yogurt", "Cucumber", "Pomegranate", "Curry leaves"]
        }
    ];

    // Sample weekly meal plan data
    const weeklyMealPlan = [
        {
            day: "Monday",
            breakfast: "Vegetable Upma with Coconut Chutney",
            lunch: "Moong Dal Khichdi with Yogurt",
            dinner: "Vegetable Soup with Multigrain Roti"
        },
        {
            day: "Tuesday",
            breakfast: "Ragi Porridge with Nuts and Honey",
            lunch: "Curd Rice with Cucumber Raita",
            dinner: "Vegetable Daliya with Mint Chutney"
        },
        {
            day: "Wednesday",
            breakfast: "Besan Chilla with Mint Chutney",
            lunch: "Rasam with Steamed Rice and Vegetables",
            dinner: "Millet Khichdi with Kadhi"
        },
        {
            day: "Thursday",
            breakfast: "Oats Idli with Coconut Chutney",
            lunch: "Vegetable Pulao with Buttermilk",
            dinner: "Moong Dal Soup with Multigrain Roti"
        },
        {
            day: "Friday",
            breakfast: "Vegetable Poha with Lemon",
            lunch: "Rajma Chawal with Cucumber Salad",
            dinner: "Vegetable Khichdi with Turmeric Milk"
        },
        {
            day: "Saturday",
            breakfast: "Vegetable Daliya Upma",
            lunch: "Kadhi with Steamed Rice",
            dinner: "Vegetable Soup with Millet Roti"
        },
        {
            day: "Sunday",
            breakfast: "Multigrain Dosa with Sambar",
            lunch: "Vegetable Biryani with Raita",
            dinner: "Light Khichdi with Turmeric Milk"
        }
    ];

    document.addEventListener('DOMContentLoaded', function() {
        // Load symptom analysis from local storage
        loadSymptomAnalysis();
        
        // Render meal recommendations
        renderMealRecommendations();
        
        // Render weekly meal plan
        renderWeeklyMealPlan();
        
        // Listen for symptom updates
        window.addEventListener('healthsync_record_updated', function() {
            loadSymptomAnalysis();
        });
    });

    // Load symptom analysis from local storage
    function loadSymptomAnalysis() {
        const latestSymptom = localStorage.getItem('healthsync_latest_symptom');
        
        if (latestSymptom) {
            try {
                const symptomData = JSON.parse(latestSymptom);
                const analysisElement = document.getElementById('symptomSummary');
                
                if (symptomData.analysis) {
                    analysisElement.innerHTML = symptomData.analysis;
                } else {
                    // Use sample data if no analysis is available
                    analysisElement.innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
                }
            } catch (e) {
                console.error("Error parsing symptom data:", e);
                // Use sample data as fallback
                document.getElementById('symptomSummary').innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
            }
        } else {
            // Use sample data if no symptom data is available
            document.getElementById('symptomSummary').innerHTML = "Based on your reported symptoms, we recommend focusing on anti-inflammatory foods and easily digestible meals. The Indian dishes suggested below are specifically chosen to help alleviate these symptoms and provide essential nutrients for recovery.";
        }
    }

    // Render meal recommendations
    function renderMealRecommendations() {
        const mealContainer = document.getElementById('indianMealCards');
        
        indianMeals.forEach(meal => {
            const mealCard = document.createElement('div');
            mealCard.className = 'meal-card';
            
            const benefitTags = meal.benefits.map(benefit => 
                `<span class="meal-benefit-tag">${benefit}</span>`
            ).join('');
            
            mealCard.innerHTML = `
                <img src="${meal.image}" alt="${meal.name}">
                <div class="meal-card-content">
                    <h3>${meal.name}</h3>
                    <p>${meal.description}</p>
                    <div class="meal-benefits">
                        ${benefitTags}
                    </div>
                    <p><strong>Key Ingredients:</strong> ${meal.ingredients.join(', ')}</p>
                    <a href="${meal.videoLink}" target="_blank" class="video-link">Watch Recipe Video</a>
                </div>
            `;
            
            mealContainer.appendChild(mealCard);
        });
    }

    // Render weekly meal plan
    function renderWeeklyMealPlan() {
        const tableBody = document.getElementById('weeklyMealPlanBody');
        
        weeklyMealPlan.forEach(day => {
            const row = document.createElement('tr');
            
            row.innerHTML = `
                <td>${day.day}</td>
                <td>${day.breakfast}</td>
                <td>${day.lunch}</td>
                <td>${day.dinner}</td>
            `;
            
            tableBody.appendChild(row);
        });
    }
</script>
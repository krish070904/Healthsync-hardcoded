<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>HealthSync Chat</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link rel="stylesheet" href="css/transitions.css">
<script src="js/include-components.js"></script>
<script src="js/page-transitions.js" defer></script>
<style type="text/tailwindcss">
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); opacity: 0; }
            25% { opacity: 0.5; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
            75% { opacity: 0.5; }
            100% { transform: translateY(-40px) rotate(360deg); opacity: 0; }
        }
        .particle {
            position: absolute;
            font-size: 20px;
            color: #faba42;
            opacity: 0;
            animation: float 10s infinite;
        }
        .particle-1 { animation-delay: 0s; left: 10%; }
        .particle-2 { animation-delay: 2s; left: 30%; font-size: 16px; }
        .particle-3 { animation-delay: 4s; left: 50%; }
        .particle-4 { animation-delay: 6s; left: 70%; font-size: 24px; }
        .particle-5 { animation-delay: 8s; left: 90%; }
        .particle-6 { animation-delay: 1s; left: 20%; font-size: 18px; }
        .particle-7 { animation-delay: 3s; left: 40%; }
        .particle-8 { animation-delay: 5s; left: 60%; font-size: 22px; }
        .particle-9 { animation-delay: 7s; left: 80%; }
        .particle-10 { animation-delay: 9s; left: 100%; }
        .message-bubble {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .message-bubble:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .btn-send {
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        .btn-send:active {
            transform: scale(0.95);
        }
        /* Formatted message styles */
        .message-bubble h1 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .message-bubble h2 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-top: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .message-bubble h3 {
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .message-bubble p {
            margin-bottom: 0.5rem;
        }
    </style>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#faba42",
                        "background-light": "#f8f7f5",
                        "background-dark": "#1a1a1a",
                        "user-bubble-start": "#ffcda3",
                        "user-bubble-end": "#faba42",
                        "bot-bubble-start-light": "#f0f0f0",
                        "bot-bubble-end-light": "#e0e0e0",
                        "bot-bubble-start-dark": "#2c2c2c",
                        "bot-bubble-end-dark": "#3a3a3a",
                    },
                    fontFamily: {
                        "display": ["Manrope"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.75rem",
                        "lg": "1.25rem",
                        "xl": "1.75rem",
                        "full": "9999px"
                    },
                    boxShadow: {
                        'soft': '0 4px 14px rgba(0, 0, 0, 0.05)',
                        'soft-dark': '0 4px 14px rgba(255, 255, 255, 0.05)'
                    }
                },
            },
        }
    </script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-gray-800 dark:text-gray-200">
<div class="flex flex-col h-screen relative overflow-hidden">
<div class="absolute top-0 left-0 w-full h-full pointer-events-none">
<div class="particle particle-1">+</div>
<div class="particle particle-2">♥</div>
<div class="particle particle-3">+</div>
<div class="particle particle-4">⚕</div>
<div class="particle particle-5">+</div>
<div class="particle particle-6">♥</div>
<div class="particle particle-7">⚕</div>
<div class="particle particle-8">+</div>
<div class="particle particle-9">♥</div>
<div class="particle particle-10">⚕</div>
</div>
<!-- Include the navbar component -->
<div data-component="navbar"></div>
<main class="flex-1 flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8 overflow-y-auto" id="chat-container">
<div class="w-full max-w-4xl flex flex-col flex-1">
<div class="text-center mb-8">
<h2 class="text-4xl font-extrabold text-background-dark dark:text-backgrou  nd-light mb-1">HealthSync</h2>
<p class="text-gray-500 dark:text-gray-400">Your Personal Care Companion</p>
</div>
<div class="flex-1 space-y-8" id="chat-messages">
<!-- Chat messages will be added here dynamically -->
</div>
<div class="mt-auto pt-6">
<div class="flex flex-wrap gap-2 mb-4 justify-center">
<button class="px-4 py-2 text-sm font-medium text-primary border border-primary/50 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 transform hover:scale-110 hover:shadow-md">Tell me about fatigue</button>
<button class="px-4 py-2 text-sm font-medium text-primary border border-primary/50 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 transform hover:scale-110 hover:shadow-md">Side effects of medication?</button>
<button class="px-4 py-2 text-sm font-medium text-primary border border-primary/50 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 transform hover:scale-110 hover:shadow-md">Next appointment details</button>
</div>
<div class="relative">
<input class="w-full pl-5 pr-36 py-4 bg-background-light dark:bg-background-dark border-2 border-gray-200 dark:border-gray-700 rounded-full focus:ring-2 focus:ring-primary/50 focus:border-primary placeholder-gray-500 dark:placeholder-gray-400 text-background-dark dark:text-background-light transition-all duration-300 shadow-inner hover:border-primary/30 dark:hover:border-primary/30 hover:shadow-md" placeholder="Ask HealthSync anything..." type="text"/>
<div class="absolute inset-y-0 right-0 flex items-center pr-2">
<button class="p-2 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 group transition-transform duration-200 ease-in-out hover:scale-110">
<span class="material-symbols-outlined text-gray-500 dark:text-gray-400 group-hover:text-primary transition-colors">mic</span>
</button>
<button class="p-2 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 group transition-transform duration-200 ease-in-out hover:scale-110">
<span class="material-symbols-outlined text-gray-500 dark:text-gray-400 group-hover:text-primary transition-colors">attach_file</span>
</button>
<button class="ml-2 btn-send px-5 py-2.5 bg-gradient-to-r from-primary to-yellow-400 text-background-dark rounded-full font-bold text-sm shadow-lg hover:shadow-xl hover:from-yellow-400 hover:to-primary transform hover:scale-105">
<span class="material-symbols-outlined">send</span>
</button>
</div>
</div>
<p class="text-xs text-center mt-2 text-gray-400 dark:text-gray-500">HealthSync is an AI assistant. Please consult your doctor for medical advice.</p>
</div>
</div>
<button class="fixed bottom-24 right-8 bg-primary/80 backdrop-blur-sm text-background-dark p-3 rounded-full shadow-lg hover:bg-primary transition-all duration-300 transform hover:scale-110 opacity-0 pointer-events-none" id="scroll-to-bottom">
<span class="material-symbols-outlined">arrow_downward</span>
</button>
</main>
</div>
<script>
        const chatContainer = document.getElementById('chat-container');
        const scrollToBottomBtn = document.getElementById('scroll-to-bottom');
        const chatInput = document.querySelector('input[placeholder="Ask HealthSync anything..."]');
        const sendButton = document.querySelector('.btn-send');
        const chatMessagesContainer = document.querySelector('.flex-1.space-y-8');
        const suggestionButtons = document.querySelectorAll('.px-4.py-2.text-sm.font-medium.text-primary.border');
        
        // Function to scroll to bottom
        function scrollToBottom() {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // Show/hide scroll button based on scroll position
        chatContainer.addEventListener('scroll', () => {
            if (chatContainer.scrollTop < chatContainer.scrollHeight - chatContainer.clientHeight - 100) {
                scrollToBottomBtn.classList.remove('opacity-0', 'pointer-events-none');
                scrollToBottomBtn.classList.add('opacity-100', 'pointer-events-auto');
            } else {
                scrollToBottomBtn.classList.add('opacity-0', 'pointer-events-none');
                scrollToBottomBtn.classList.remove('opacity-100', 'pointer-events-auto');
            }
        });
        
        // Scroll to bottom when button clicked
        scrollToBottomBtn.addEventListener('click', () => {
            chatContainer.scrollTo({
                top: chatContainer.scrollHeight,
                behavior: 'smooth'
            });
        });
        
        // Function to generate greeting based on time, day, and weather
        function generateGreeting() {
            const now = new Date();
            const hour = now.getHours();
            const day = now.toLocaleDateString('en-US', { weekday: 'long' });
            
            // Time-based greeting
            let timeGreeting = '';
            if (hour < 12) {
                timeGreeting = 'Good morning';
            } else if (hour < 18) {
                timeGreeting = 'Good afternoon';
            } else {
                timeGreeting = 'Good evening';
            }
            
            // Get current season based on month
            const month = now.getMonth();
            let season = '';
            if (month >= 2 && month <= 4) {
                season = 'spring';
            } else if (month >= 5 && month <= 7) {
                season = 'summer';
            } else if (month >= 8 && month <= 10) {
                season = 'fall';
            } else {
                season = 'winter';
            }
            
            // Generate full greeting
            const greeting = `${timeGreeting}! Welcome to HealthSync on this ${day} in ${season}. How can I assist you with your health today?`;
            
            // Add greeting as first message
            addMessage(greeting);
        }
        
        // Scroll to bottom on load and show greeting
        window.addEventListener('load', () => {
            generateGreeting();
            scrollToBottom();
        });
        
        // Function to add a message to the chat
        function addMessage(message, isUser = false) {
            const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const userName = isUser ? 'Sarah' : 'HealthSync';
            const userImage = isUser ? 
                "https://lh3.googleusercontent.com/aida-public/AB6AXuB-Y4rqip-Emr2FLISH0CuvX1awbQV1o0CgTKdnW8dTRia-YsUajwUmFSrqwBUDe_iGKRNIDtp78pFo9qnYlPSHoEwNdYTb0BURvP3eyCPkRW5lotFVOPKaKepM0qbhIOQV8yTqE7iwEfP7qZCNdD1vmp-FTem5xM5a589YdMOLquC1AnUi9AoJi0EmX9pjMIyvp2-kApjqn71dlPVRYUXs359x0ckqA7uw2sjCnbggWOkXCR8mQcdZs97nL4Lkp84hbi4cx0Hj5EA8" :
                "https://lh3.googleusercontent.com/aida-public/AB6AXuAoQyvc2lYA0vHFNFTyyVASeqhOiMAnaRJtEqVz0K6UyhNVZOPwco3z6q3Gaik6fOMrMk3JuB28fuVdjES3DW0FTcxS0ECRYRV14DCjAYM_NPhSX6z4zJnHMUYw48G6eCoGLuqkhwgtGeXYX-M0gJ5teBQSfXEbIdV43e9HqZf9Rdce0RJWy10rP3hKumatCfgAiUwOHSwycAqXJzXN7yaqe4FhNonUYpgUkmyCLuKWQAoHzynh4s4J18GsyaWlxZpsjmBEeu9uNQzD";
            
            const messageHTML = `
                <div class="flex items-start gap-4${isUser ? ' justify-end' : ''}">
                    ${!isUser ? `<div class="w-10 h-10 rounded-full bg-center bg-no-repeat bg-cover shrink-0" style="background-image: url('${userImage}');"></div>` : ''}
                    <div class="flex flex-col items-${isUser ? 'end' : 'start'}">
                        <span class="text-sm font-bold text-gray-500 dark:text-gray-400 mb-1">${userName} • ${currentTime}</span>
                        <div class="message-bubble bg-gradient-to-br ${isUser ? 'from-user-bubble-start to-user-bubble-end' : 'from-bot-bubble-start-light to-bot-bubble-end-light dark:from-bot-bubble-start-dark dark:to-bot-bubble-end-dark'} p-4 rounded-lg ${isUser ? 'rounded-tr-none' : 'rounded-tl-none'} shadow-soft dark:shadow-soft-dark max-w-lg">
                            <div class="text-background-dark ${!isUser ? 'dark:text-background-light' : ''}">${isUser ? `<p>${message}</p>` : message}</div>
                        </div>
                    </div>
                    ${isUser ? `<div class="w-10 h-10 rounded-full bg-center bg-no-repeat bg-cover shrink-0" style="background-image: url('${userImage}');"></div>` : ''}
                </div>
            `;
            
            chatMessagesContainer.insertAdjacentHTML('beforeend', messageHTML);
            scrollToBottom();
        }
        
        // Function to send message to Gemini API
        async function sendMessageToGemini(message) {
            try {
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message })
                });
                
                const data = await response.json();
                if (data.reply) {
                    addMessage(data.reply);
                } else if (data.error) {
                    addMessage(`Error: ${data.error}`);
                }
            } catch (error) {
                console.error('Error sending message:', error);
                addMessage('Sorry, I encountered an error while processing your request. Please try again later.');
            }
        }
        
        // Send message when button clicked or Enter pressed
        function handleSendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                sendMessageToGemini(message);
                chatInput.value = '';
            }
        }
        
        sendButton.addEventListener('click', handleSendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSendMessage();
            }
        });
        
        // Handle suggestion buttons
        suggestionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const message = button.textContent;
                addMessage(message, true);
                sendMessageToGemini(message);
            });
        });
    </script>

</body></html>